{"ast":null,"code":"import React,{useState,useRef,useEffect}from\"react\";import\"./App.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[input,setInput]=useState(\"\");const[messages,setMessages]=useState([]);const[loading,setLoading]=useState(false);const messagesEndRef=useRef(null);// when asking new question, show that one at the bottom\nconst scrollToBottom=()=>{var _messagesEndRef$curre;(_messagesEndRef$curre=messagesEndRef.current)===null||_messagesEndRef$curre===void 0?void 0:_messagesEndRef$curre.scrollIntoView({behavior:\"smooth\"});};useEffect(()=>{scrollToBottom();},[messages]);// Generate greeting prompt on first load\nuseEffect(()=>{fetch(\"/ask\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({is_first:true})}).then(res=>res.json()).then(data=>{setMessages([{sender:\"bot\",text:data.answer}]);});},[]);// message to send question to API\nconst sendMessage=async()=>{const question=input.trim();if(!question)return;// Add user message\nsetMessages(prev=>[...prev,{sender:\"user\",text:question}]);setInput(\"\");setLoading(true);try{const res=await fetch(\"/ask\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({question})});const data=await res.json();if(data.error){setMessages(prev=>[...prev,{sender:\"bot\",text:\"Error: \"+data.error}]);}else{setMessages(prev=>[...prev,{sender:\"bot\",text:data.answer}]);}}catch(_unused){setMessages(prev=>[...prev,{sender:\"bot\",text:\"Failed to connect to the backend.\"}]);}setLoading(false);};// detect when something is typed in box\nconst handleKeyDown=e=>{if(e.key===\"Enter\"&&!e.shiftKey){e.preventDefault();sendMessage();}};return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"gradient-title\",style:{textAlign:\"center\"},children:\"TradeBot\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"chat-window\",children:[messages.length===0&&!loading&&/*#__PURE__*/_jsx(\"div\",{className:\"chat-loading\"}),messages.map((msg,idx)=>/*#__PURE__*/_jsx(\"div\",{className:\"chat-message \".concat(msg.sender===\"user\"?\"user\":\"bot\"),children:/*#__PURE__*/_jsx(\"div\",{className:\"chat-bubble\",children:msg.text})},idx)),loading&&/*#__PURE__*/_jsx(\"div\",{className:\"chat-message bot\",children:/*#__PURE__*/_jsx(\"div\",{className:\"chat-bubble\",children:\"...\"})}),/*#__PURE__*/_jsx(\"div\",{ref:messagesEndRef})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"submit-question\",children:[/*#__PURE__*/_jsx(\"textarea\",{rows:2,placeholder:\"Type your question and press Enter...\",value:input,onChange:e=>setInput(e.target.value),onKeyDown:handleKeyDown,disabled:loading,className:\"chat-input\"}),/*#__PURE__*/_jsx(\"button\",{onClick:sendMessage,disabled:loading||!input.trim(),className:\"chat-send-button\",children:/*#__PURE__*/_jsx(\"span\",{className:\"arrow\",children:\"\\u27A4\"})})]})]});}export default App;","map":{"version":3,"names":["React","useState","useRef","useEffect","jsx","_jsx","jsxs","_jsxs","App","input","setInput","messages","setMessages","loading","setLoading","messagesEndRef","scrollToBottom","_messagesEndRef$curre","current","scrollIntoView","behavior","fetch","method","headers","body","JSON","stringify","is_first","then","res","json","data","sender","text","answer","sendMessage","question","trim","prev","error","_unused","handleKeyDown","e","key","shiftKey","preventDefault","className","children","style","textAlign","length","map","msg","idx","concat","ref","rows","placeholder","value","onChange","target","onKeyDown","disabled","onClick"],"sources":["/Users/danielaramos/Documents/GitHub/tradingchatbot/chat/src/App.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from \"react\";\nimport \"./App.css\";\n\nfunction App() {\n  const [input, setInput] = useState(\"\");\n  const [messages, setMessages] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const messagesEndRef = useRef(null);\n\n  // when asking new question, show that one at the bottom\n\n  const scrollToBottom = () => {\n    messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\n  };\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages]);\n\n  // Generate greeting prompt on first load\n  useEffect(() => {\n  fetch(\"/ask\", {\n    method: \"POST\",\n    headers: { \"Content-Type\": \"application/json\" },\n    body: JSON.stringify({ is_first: true }),\n  })\n    .then(res => res.json())\n    .then(data => {\n      setMessages([{ sender: \"bot\", text: data.answer }]);\n    });\n}, []);\n\n  // message to send question to API\n  const sendMessage = async () => {\n    const question = input.trim();\n    if (!question) return;\n\n    // Add user message\n    setMessages((prev) => [...prev, { sender: \"user\", text: question }]);\n    setInput(\"\");\n    setLoading(true);\n\n    try {\n      const res = await fetch(\"/ask\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ question }),\n      });\n      const data = await res.json();\n      if (data.error) {\n        setMessages((prev) => [...prev, { sender: \"bot\", text: \"Error: \" + data.error }]);\n      } else {\n        setMessages((prev) => [...prev, { sender: \"bot\", text: data.answer }]);\n      }\n    } catch {\n      setMessages((prev) => [...prev, { sender: \"bot\", text: \"Failed to connect to the backend.\" }]);\n    }\n\n    setLoading(false);\n  };\n\n  // detect when something is typed in box\n\n  const handleKeyDown = (e) => {\n    if (e.key === \"Enter\" && !e.shiftKey) {\n      e.preventDefault();\n      sendMessage();\n    }\n  };\n\n  return (\n    <div className=\"App\" >\n      <h1 className='gradient-title' style={{ textAlign: \"center\" }}>TradeBot</h1>\n      <div className=\"chat-window\">\n        {messages.length === 0 && !loading && (\n          <div className=\"chat-loading\"></div>\n        )}\n        {messages.map((msg, idx) => (\n          <div key={idx} className={`chat-message ${msg.sender === \"user\" ? \"user\" : \"bot\"}`}>\n            <div className=\"chat-bubble\">{msg.text}</div>\n          </div>\n        ))}\n        {loading && (\n          <div className=\"chat-message bot\">\n            <div className=\"chat-bubble\">...</div>\n          </div>\n        )}\n        <div ref={messagesEndRef} />\n      </div>\n\n      <div className = 'submit-question'>\n        <textarea rows={2} placeholder=\"Type your question and press Enter...\" value={input}\n        onChange={(e) => setInput(e.target.value)} onKeyDown={handleKeyDown} disabled={loading}\n        className=\"chat-input\"\n        />\n        <button onClick={sendMessage} disabled={loading || !input.trim()} className=\"chat-send-button\">\n          <span className=\"arrow\">âž¤</span>\n        </button>\n\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}